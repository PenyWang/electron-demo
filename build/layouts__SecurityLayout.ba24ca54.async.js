(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0jlH":function(e,t,n){"use strict";n.r(t);var r=n("tJVT"),o=n("q1tI"),a=n.n(o),i=n("tbuW"),c=n("9kvl"),u=n("WHYC"),s=n("s4NR"),l=n("Ub/G"),d=(n("miYZ"),n("tsqr")),f=n("cGDp"),p=n("Qyje"),b=function(e){var t=Object(c["h"])(),n=Object(c["g"])(),r=function(){var e=localStorage.getItem("accountInfo")||"{}";if(Object(l["b"])(e)){var r=JSON.parse(e);(null===r||void 0===r?void 0:r.userName)&&(null===r||void 0===r?void 0:r.password)?n({type:"login/loginAgain",payload:{username:null===r||void 0===r?void 0:r.userName,password:null===r||void 0===r?void 0:r.password,type:"account"}}):(d["b"].error(t.formatMessage({id:"hooks.useTokenListener.userErr",defaultMessage:"\u7528\u6237\u4fe1\u606f\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55"})),c["d"].replace({pathname:"/user/login",search:Object(p["stringify"])({redirect:window.location.href})}))}};Object(o["useEffect"])((function(){var t,n=localStorage.getItem("userInfo")||"";if(Object(l["b"])(n)){var o,a=JSON.parse(n);if(a&&a.id)(null===e||void 0===e||null===(o=e.state)||void 0===o?void 0:o.loginJump)||r(),t=window.setInterval((function(){r()}),1e3*(f["f"]-20))}return function(){window.clearInterval(t)}}),[])},v=b,g=function(e){var t=e.children,n=e.location,d=Object(o["useState"])(!1),f=Object(r["a"])(d,2),p=f[0],b=f[1],g=Object(c["i"])((function(e){return e.loading})),O=g.models,w=Object(c["i"])((function(e){return e.user})),j=w.currentUser,m=Object(c["c"])(),y=Object(c["g"])();return v(n),Object(o["useEffect"])((function(){b(!0);var e=localStorage.getItem("userInfo")||"";if(Object(l["b"])(e)){var t=JSON.parse(e);t&&t.id&&(y({type:"user/saveCurrentUser",payload:t}),y({type:"initialize/getSpecies",payload:{}}),y({type:"global/localesUpdate",payload:{currentLocales:m||"zh-CN"}}))}}),[]),!j&&O.user||!p?a.a.createElement(i["a"],null):!j||!j.id&&"/user/login"!==window.location.pathname?a.a.createElement(u["c"],{to:"/user/login?".concat(Object(s["stringify"])({redirect:window.location.href}))}):t};t["default"]=g},"Ub/G":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(e){return JSON.parse(JSON.stringify(e))},o=function(e){try{return JSON.parse(e),!0}catch(t){return!1}}}}]);